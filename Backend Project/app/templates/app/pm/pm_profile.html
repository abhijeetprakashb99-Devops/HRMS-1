{% extends "app/base4.html" %}
{% load static %}
{% block content %}

<main class="content-wrap">

    <!-- PAGE HEADER -->
    <div class="d-flex justify-content-between mb-3"
        style="background:#fff;border:1px solid #e5e7eb;padding:10px 15px;border-radius:4px;">
        <div class="page-title">Project Manager Profile</div>
        <div class="text-muted">Dashboard</div>
    </div>

    <!-- PROFILE CARD -->
    <div style="background:#ffffff;border-radius:10px;
        box-shadow:0px 2px 6px rgba(0,0,0,0.08);
        border:1px solid #e5e7eb;overflow:hidden;margin:20px 0;">

        <!-- PROFILE HEADER -->
        <div style="padding:30px;
            border-bottom:1px solid #e5e7eb;
            background-color: rgb(0, 114, 114);
            color:white;">

            <div style="display:flex;align-items:center;gap:25px;flex-wrap:wrap;">

                <!-- AVATAR -->
                <div style="width:120px;height:120px;border-radius:50%;
                    background:#f8f9fa;
                    display:flex;align-items:center;justify-content:center;
                    border:4px solid white;
                    box-shadow:0 4px 12px rgba(0,0,0,0.2);">
                    <i class="fas fa-user-tie" style="font-size:48px;color:#1f2937;"></i>
                </div>

                <!-- BASIC INFO -->
                <div style="flex:1;min-width:250px;">
                    <h3 style="margin:0;font-weight:700;font-size:28px;">
                        {{ pm.name }}
                    </h3>
                    <p style="margin:5px 0;opacity:0.9;">{{ pm.designation }}</p>
                    <p style="margin:5px 0;font-size:14px;opacity:0.8;">
                        Employee ID: {{ pm.employee_id }}
                    </p>

                    <!-- STATS BADGES -->
                    <div style="display:flex;gap:15px;margin-top:15px;flex-wrap:wrap;">
                        <div style="background:rgba(255,255,255,0.2);
                            padding:8px 12px;border-radius:20px;font-size:12px;">
                            <i class="fas fa-diagram-project me-1"></i>
                            Projects: {{ total_projects }}
                        </div>
                        <div style="background:rgba(255,255,255,0.2);
                            padding:8px 12px;border-radius:20px;font-size:12px;">
                            <i class="fas fa-user-tie me-1"></i>
                            Team Leads: {{ total_team_leads }}
                        </div>
                        <div style="background:rgba(255,255,255,0.2);
                            padding:8px 12px;border-radius:20px;font-size:12px;">
                            <i class="fas fa-users me-1"></i>
                            Members: {{ total_team_members }}
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- TABS -->
        <ul class="nav nav-tabs"
            style="border-bottom:1px solid #e5e7eb;background:#f8f9fa;">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#personal"
                    style="border:none;font-weight:600;padding:15px 20px;">
                    <i class="fas fa-user me-2"></i>Personal Info
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#official"
                    style="border:none;font-weight:600;padding:15px 20px;">
                    <i class="fas fa-briefcase me-2"></i>Official Info
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#team"
                    style="border:none;font-weight:600;padding:15px 20px;">
                    <i class="fas fa-users me-2"></i>Team Leaders
                </a>
            </li>
        </ul>

        <!-- TAB CONTENT -->
        <div class="tab-content" style="padding:30px;">

            <!-- PERSONAL TAB -->
            <div class="tab-pane fade show active" id="personal">
                <div class="row g-4">
                    <div class="col-md-6">
                        <label class="fw-bold">Contact</label>
                        <input class="form-control" readonly
                            value="{{ pm.contact }}"
                            style="background:#f8f9fa;border-radius:8px;">
                    </div>
                    <div class="col-md-6">
                        <label class="fw-bold">Address</label>
                        <input class="form-control" readonly
                            value="{{ pm.address }}"
                            style="background:#f8f9fa;border-radius:8px;">
                    </div>
                    <div class="col-md-6">
                        <label class="fw-bold">Personal Email</label>
                        <input class="form-control" readonly
                            value="{{ pm.personal_email }}"
                            style="background:#f8f9fa;border-radius:8px;">
                    </div>
                </div>
            </div>

            <!-- OFFICIAL TAB -->
            <div class="tab-pane fade" id="official">
                <div class="row g-4">
                    <div class="col-md-6">
                        <label class="fw-bold">Official Email</label>
                        <input class="form-control" readonly
                            value="{{ pm.official_email }}"
                            style="background:#f8f9fa;border-radius:8px;">
                    </div>
                    <div class="col-md-6">
                        <label class="fw-bold">Education</label>
                        <input class="form-control" readonly
                            value="{{ pm.education }}"
                            style="background:#f8f9fa;border-radius:8px;">
                    </div>
                    <div class="col-md-6">
                        <label class="fw-bold">Package</label>
                        <input class="form-control" readonly
                            value="â‚¹{{ pm.package }}"
                            style="background:#f8f9fa;border-radius:8px;">
                    </div>
                </div>
            </div>

            <!-- TEAM TAB -->
            <div class="tab-pane fade" id="team">
                {% if team_leads %}
                <div class="table-responsive">
                    <table class="table table-bordered align-middle">
                        <thead class="table-light">
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Experience</th>
                                <th>Team Size</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for tl in team_leads %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ tl.employee.first_name }} {{ tl.employee.last_name }}</td>
                                <td>{{ tl.experience_years }} Years</td>
                                <td>{{ tl.team_size }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <p class="text-muted">No Team Leaders Assigned.</p>
                {% endif %}
            </div>

        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
