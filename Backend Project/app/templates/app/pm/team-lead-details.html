{% extends "app/base4.html" %}
{% load static %}
{% block content %}

<main class="content-wrap p-4">

    <!-- PAGE TITLE -->
    <div class="mb-4">
        <h4 class="fw-bold text-teal">
            <i class="fas fa-user-tie me-2"></i> Team Lead Details
        </h4>
    </div>

    <!-- TEAM LEAD PROFILE CARD -->
    <div class="card shadow-sm mb-4 p-4">
        <div class="row align-items-center">
            <div class="col-md-3 text-center">

                {% if lead.employee.image %}
                <img src="{{ lead.employee.image.url }}"
                     class="rounded-circle shadow"
                     width="140" height="140"
                     style="object-fit:cover;">
                {% else %}
                <img src="{% static 'assets/img/default-user.png' %}"
                     class="rounded-circle shadow"
                     width="140" height="140">
                {% endif %}

            </div>

            <div class="col-md-9">
                <h4 class="fw-bold mb-1">
                    {{ lead.employee.first_name }} {{ lead.employee.last_name }}
                </h4>
                <p class="mb-1"><b>Email:</b> {{ lead.employee.email }}</p>
                <p class="mb-1"><b>Experience:</b> {{ lead.experience_years }} Years</p>
                <p class="mb-0"><b>Role:</b> Team Lead</p>
            </div>
        </div>
    </div>

    <!-- PROJECTS -->
    {% for project in projects %}
    <div class="card shadow-sm mb-4">

        <!-- PROJECT HEADER -->
        <div class="card-header bg-teal text-white">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <b>{{ project.project_name }}</b>
                    <span class="ms-2 badge bg-light text-dark">
                        {{ project.project_code }}
                    </span>
                </div>
                <span class="badge bg-warning text-dark text-uppercase">
                    {{ project.priority }}
                </span>
            </div>
        </div>

        <!-- PROJECT BODY -->
        <div class="card-body">
            <p><b>Duration:</b> {{ project.start_date }} â†’ {{ project.end_date }}</p>
            <p><b>Description:</b> {{ project.description }}</p>

            <hr>

            <!-- TEAM MEMBERS -->
            <h6 class="fw-bold mb-3">
                <i class="fas fa-users me-1"></i> Team Members
            </h6>

            <div class="row">
                {% for m in project.team_members.all %}
                <div class="col-md-3 mb-3">
                    <div class="card text-center p-3 shadow-sm h-100">

                        {% if m.image %}
                        <img src="{{ m.image.url }}"
                             class="rounded-circle mx-auto"
                             width="70" height="70"
                             style="object-fit:cover;">
                        {% else %}
                        <img src="{% static 'assets/img/default-user.png' %}"
                             class="rounded-circle mx-auto"
                             width="70" height="70">
                        {% endif %}

                        <h6 class="mt-2 mb-0">
                            {{ m.first_name }} {{ m.last_name }}
                        </h6>
                        <small class="text-muted">{{ m.email }}</small>
                    </div>
                </div>
                {% empty %}
                <p class="text-muted">No team members assigned.</p>
                {% endfor %}
            </div>
        </div>
    </div>
    {% empty %}
    <p class="text-muted">No projects assigned to this team lead.</p>
    {% endfor %}

</main>

{% endblock %}
